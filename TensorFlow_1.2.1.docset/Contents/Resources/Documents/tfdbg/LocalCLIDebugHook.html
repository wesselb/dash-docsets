<div itemscope="" itemtype="http://developers.google.com/ReferenceObject">
<p><meta itemprop="name" content="tfdbg.LocalCLIDebugHook" /> <meta itemprop="property" content="graph"/> <meta itemprop="property" content="graph_def"/> <meta itemprop="property" content="sess_str"/> <meta itemprop="property" content="session"/> <meta itemprop="property" content="__enter__"/> <meta itemprop="property" content="__exit__"/> <meta itemprop="property" content="__init__"/> <meta itemprop="property" content="add_tensor_filter"/> <meta itemprop="property" content="after_create_session"/> <meta itemprop="property" content="after_run"/> <meta itemprop="property" content="as_default"/> <meta itemprop="property" content="before_run"/> <meta itemprop="property" content="begin"/> <meta itemprop="property" content="close"/> <meta itemprop="property" content="end"/> <meta itemprop="property" content="invoke_node_stepper"/> <meta itemprop="property" content="on_run_end"/> <meta itemprop="property" content="on_run_start"/> <meta itemprop="property" content="on_session_init"/> <meta itemprop="property" content="partial_run"/> <meta itemprop="property" content="partial_run_setup"/> <meta itemprop="property" content="run"/></p>
</div>
<a name="//apple_ref/cpp/Class/tfdbg.LocalCLIDebugHook" class="dashAnchor"></a><h1 id="tfdbg.localclidebughook">tfdbg.LocalCLIDebugHook</h1>
<h3 id="class-tfdbg.localclidebughook"><code>class tfdbg.LocalCLIDebugHook</code></h3>
<p>Defined in <a href="https://www.tensorflow.org/code/tensorflow/python/debug/wrappers/hooks.py"><code>tensorflow/python/debug/wrappers/hooks.py</code></a>.</p>
<p>See the guide: <a href="../../../api_guides/python/tfdbg.md#Session_wrapper_class_and_SessionRunHook_implementations">TensorFlow Debugger &gt; Session wrapper class and <code>SessionRunHook</code> implementations</a></p>
<p>Command-line-interface debugger hook.</p>
<p>Can be used as a monitor/hook for <code>tf.train.MonitoredSession</code>s and <code>tf.contrib.learn</code>'s <code>Estimator</code>s and <code>Experiment</code>s.</p>
<h2 id="properties">Properties</h2>
<h3 id="graph">
<code>graph</code>
</h3>
<h3 id="graph_def">
<code>graph_def</code>
</h3>
<h3 id="sess_str">
<code>sess_str</code>
</h3>
<h3 id="session">
<code>session</code>
</h3>
<h2 id="methods">Methods</h2>
<h3 id="__init__">
<code><strong>init</strong></code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="fu">__init__</span>(
    ui_type<span class="op">=</span><span class="st">&#39;curses&#39;</span>,
    dump_root<span class="op">=</span><span class="va">None</span>,
    thread_name_filter<span class="op">=</span><span class="va">None</span>
)</code></pre></div>
<p>Create a local debugger command-line interface (CLI) hook.</p>
<h4 id="args">Args:</h4>
<ul>
<li><b><code>ui_type</code></b>: (str) user-interface type.</li>
<li><b><code>dump_root</code></b>: (<code>str</code>) optional path to the dump root directory. Must be a directory that does not exist or an empty directory. If the directory does not exist, it will be created by the debugger core during debug <code>run()</code> calls and removed afterwards.</li>
<li><b><code>thread_name_filter</code></b>: Regular-expression white list for threads on which the wrapper session will be active. See doc of <code>BaseDebugWrapperSession</code> for more details.</li>
</ul>
<h3 id="__enter__">
<code><strong>enter</strong></code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="fu">__enter__</span>()</code></pre></div>
<h3 id="__exit__">
<code><strong>exit</strong></code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="fu">__exit__</span>(
    exec_type,
    exec_value,
    exec_tb
)</code></pre></div>
<h3 id="add_tensor_filter">
<code>add_tensor_filter</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">add_tensor_filter(
    filter_name,
    tensor_filter
)</code></pre></div>
<p>Add a tensor filter.</p>
<p>See doc of <code>LocalCLIDebugWrapperSession.add_tensor_filter()</code> for details. Override default behavior to accommodate the possibility of this method being called prior to the initialization of the underlying <code>LocalCLIDebugWrapperSession</code> object.</p>
<h4 id="args-1">Args:</h4>
<ul>
<li><b><code>filter_name</code></b>: See doc of <code>LocalCLIDebugWrapperSession.add_tensor_filter()</code> for details.</li>
<li><b><code>tensor_filter</code></b>: See doc of <code>LocalCLIDebugWrapperSession.add_tensor_filter()</code> for details.</li>
</ul>
<h3 id="after_create_session">
<code>after_create_session</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">after_create_session(
    session,
    coord
)</code></pre></div>
<p>Called when new TensorFlow session is created.</p>
<p>This is called to signal the hooks that a new session has been created. This has two essential differences with the situation in which <code>begin</code> is called:</p>
<ul>
<li>When this is called, the graph is finalized and ops can no longer be added to the graph.</li>
<li>This method will also be called as a result of recovering a wrapped session, not only at the beginning of the overall session.</li>
</ul>
<h4 id="args-2">Args:</h4>
<ul>
<li><b><code>session</code></b>: A TensorFlow Session that has been created.</li>
<li><b><code>coord</code></b>: A Coordinator object which keeps track of all threads.</li>
</ul>
<h3 id="after_run">
<code>after_run</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">after_run(
    run_context,
    run_values
)</code></pre></div>
<h3 id="as_default">
<code>as_default</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">as_default()</code></pre></div>
<h3 id="before_run">
<code>before_run</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">before_run(run_context)</code></pre></div>
<h3 id="begin">
<code>begin</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">begin()</code></pre></div>
<h3 id="close">
<code>close</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">close()</code></pre></div>
<h3 id="end">
<code>end</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">end(session)</code></pre></div>
<p>Called at the end of session.</p>
<p>The <code>session</code> argument can be used in case the hook wants to run final ops, such as saving a last checkpoint.</p>
<p>If <code>session.run()</code> raises exception other than OutOfRangeError or StopIteration then <code>end()</code> is not called. Note the difference between <code>end()</code> and <code>after_run()</code> behavior when <code>session.run()</code> raises OutOfRangeError or StopIteration. In that case <code>end()</code> is called but <code>after_run()</code> is not called.</p>
<h4 id="args-3">Args:</h4>
<ul>
<li><b><code>session</code></b>: A TensorFlow Session that will be soon closed.</li>
</ul>
<h3 id="invoke_node_stepper">
<code>invoke_node_stepper</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">invoke_node_stepper(
    node_stepper,
    restore_variable_values_on_exit<span class="op">=</span><span class="va">True</span>
)</code></pre></div>
<p>Overrides method in base class to implement interactive node stepper.</p>
<h4 id="args-4">Args:</h4>
<ul>
<li><b><code>node_stepper</code></b>: (<code>stepper.NodeStepper</code>) The underlying NodeStepper API object.</li>
<li><b><code>restore_variable_values_on_exit</code></b>: (<code>bool</code>) Whether any variables whose values have been altered during this node-stepper invocation should be restored to their old values when this invocation ends.</li>
</ul>
<h4 id="returns">Returns:</h4>
<p>The same return values as the <code>Session.run()</code> call on the same fetches as the NodeStepper.</p>
<h3 id="on_run_end">
<code>on_run_end</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">on_run_end(request)</code></pre></div>
<p>Overrides on-run-end callback.</p>
<p>Actions taken: 1) Load the debug dump. 2) Bring up the Analyzer CLI.</p>
<h4 id="args-5">Args:</h4>
<ul>
<li><b><code>request</code></b>: An instance of OnSessionInitRequest.</li>
</ul>
<h4 id="returns-1">Returns:</h4>
<p>An instance of OnSessionInitResponse.</p>
<h3 id="on_run_start">
<code>on_run_start</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">on_run_start(request)</code></pre></div>
<p>Overrides on-run-start callback.</p>
<p>Invoke the CLI to let user choose what action to take: <code>run</code> / <code>invoke_stepper</code>.</p>
<h4 id="args-6">Args:</h4>
<ul>
<li><b><code>request</code></b>: An instance of <code>OnRunStartRequest</code>.</li>
</ul>
<h4 id="returns-2">Returns:</h4>
<p>An instance of <code>OnRunStartResponse</code>.</p>
<h3 id="on_session_init">
<code>on_session_init</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">on_session_init(request)</code></pre></div>
<p>Overrides on-session-init callback.</p>
<h4 id="args-7">Args:</h4>
<ul>
<li><b><code>request</code></b>: An instance of <code>OnSessionInitRequest</code>.</li>
</ul>
<h4 id="returns-3">Returns:</h4>
<p>An instance of <code>OnSessionInitResponse</code>.</p>
<h3 id="partial_run">
<code>partial_run</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">partial_run(
    handle,
    fetches,
    feed_dict<span class="op">=</span><span class="va">None</span>
)</code></pre></div>
<h3 id="partial_run_setup">
<code>partial_run_setup</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">partial_run_setup(
    fetches,
    feeds<span class="op">=</span><span class="va">None</span>
)</code></pre></div>
<p>Sets up the feeds and fetches for partial runs in the session.</p>
<h3 id="run">
<code>run</code>
</h3>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">run(
    fetches,
    feed_dict<span class="op">=</span><span class="va">None</span>,
    options<span class="op">=</span><span class="va">None</span>,
    run_metadata<span class="op">=</span><span class="va">None</span>
)</code></pre></div>
<p>Wrapper around Session.run() that inserts tensor watch options.</p>
<h4 id="args-8">Args:</h4>
<ul>
<li><b><code>fetches</code></b>: Same as the <code>fetches</code> arg to regular <code>Session.run()</code>.</li>
<li><b><code>feed_dict</code></b>: Same as the <code>feed_dict</code> arg to regular <code>Session.run()</code>.</li>
<li><b><code>options</code></b>: Same as the <code>options</code> arg to regular <code>Session.run()</code>.</li>
<li><b><code>run_metadata</code></b>: Same as the <code>run_metadata</code> arg to regular <code>Session.run()</code>.</li>
</ul>
<h4 id="returns-4">Returns:</h4>
<p>Simply forwards the output of the wrapped <code>Session.run()</code> call.</p>
<h4 id="raises">Raises:</h4>
<ul>
<li><b><code>ValueError</code></b>: On invalid <code>OnRunStartAction</code> value.</li>
</ul>
